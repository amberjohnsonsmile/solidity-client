<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript" src="/node_modules/web3/src/index.js"></script>
    <script type="text/javascript">
      var Web3 = require('web3');
      var web3 = new Web3();
      web3.setProvider("https://mainnet.infura.io/v3/a26e672ce4f049e497dfc442176c2464")
      web3.eth.defaultAccount = web3.eth.accounts[0];

      var customerContract = web3.eth.contract("[
        {
          "constant": false,
          "inputs": [
            {
              "name": "id",
              "type": "uint256"
            },
            {
              "name": "name",
              "type": "string"
            },
            {
              "name": "dateOfBirth",
              "type": "uint256"
            },
            {
              "name": "social",
              "type": "uint256"
            }
          ],
          "name": "createCustomer",
          "outputs": [],
          "payable": false,
          "type": "function",
          "stateMutability": "nonpayable"
        },
        {
          "constant": false,
          "inputs": [
            {
              "name": "index",
              "type": "uint256"
            },
            {
              "name": "name",
              "type": "string"
            }
          ],
          "name": "updateCustomer",
          "outputs": [],
          "payable": false,
          "type": "function",
          "stateMutability": "nonpayable"
        },
        {
          "constant": false,
          "inputs": [
            {
              "name": "index",
              "type": "uint256"
            },
            {
              "name": "status",
              "type": "uint256"
            }
          ],
          "name": "updateCustomerStatus",
          "outputs": [],
          "payable": false,
          "type": "function",
          "stateMutability": "nonpayable"
        },
        {
          "constant": true,
          "inputs": [],
          "name": "count",
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ],
          "payable": false,
          "type": "function",
          "stateMutability": "view"
        },
        {
          "constant": true,
          "inputs": [
            {
              "name": "index",
              "type": "uint256"
            }
          ],
          "name": "getCustomer",
          "outputs": [
            {
              "name": "id",
              "type": "uint256"
            },
            {
              "name": "name",
              "type": "string"
            },
            {
              "name": "dateOfBirth",
              "type": "uint256"
            },
            {
              "name": "social",
              "type": "uint256"
            },
            {
              "name": "status",
              "type": "uint256"
            }
          ],
          "payable": false,
          "type": "function",
          "stateMutability": "view"
        },
        {
          "constant": true,
          "inputs": [
            {
              "name": "id",
              "type": "uint256"
            }
          ],
          "name": "getCustomerById",
          "outputs": [
            {
              "name": "idRet",
              "type": "uint256"
            },
            {
              "name": "name",
              "type": "string"
            },
            {
              "name": "dateOfBirth",
              "type": "uint256"
            },
            {
              "name": "social",
              "type": "uint256"
            },
            {
              "name": "status",
              "type": "uint256"
            }
          ],
          "payable": false,
          "type": "function",
          "stateMutability": "view"
        }
      ]");

      var customerContractObject = customerContract.at('0x182a7998bbb436789766b7467b98870744e81cfd');

      function register() {
        var txn = customerContractObject.createCustomer(document.getElementByID('id').value, document.getElementById('name').value, document.getElementById('dob').value, document.getElementById('social').value, {gas:144840});
        console.log(txn);
      }
    </script>
  </head>
  <body>
    <h1>Data Contract Registry</h1>
    <label for="id">Customer Id</label>
    <input type="number" name="id" id="id" />
    <label for="name">Customer Name</label>
    <input type="text" name="name" id="name" />
    <label for="dob">Customer Date Of Birth</label>
    <input type="date" name="dob" id="dob" />
    <label for="social">Customer Social Security Number</label>
    <input type="number" name="social" id="social" />
    <input type="button" id="registration" value="Register" onclick="register();"/>
  </body>
</html>
